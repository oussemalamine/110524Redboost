import{r,_,R as D,a as T,c as q,P as v,g as G,q as $,h as B,j as e,B as M,L as V,n as W,D as J,E as U}from"./index-BWSGRk5u.js";import{F as H,a as K}from"./index-CIUSXmTu.js";import{b as O,c as l,a as p}from"./index.es-DRZNMFCF.js";import{c as Q,a as b,u as X,b as Y,C as S,d as k}from"./index.module-b1mwbSQU.js";import{C as A,a as x}from"./CRow-BFP9KtH9.js";import{C as z,a as E}from"./CCardBody-D8fG5Ixc.js";import{C as ee}from"./CForm-C8b6Sqr0.js";import{C as R}from"./CInputGroup-DmmnlAuK.js";import{C as t}from"./CInputGroupText-Ckat52oW.js";import{C as I}from"./CFormInput-C596D-75.js";import{c as se}from"./isObject-C2i0osli.js";var j=r.forwardRef(function(o,d){var c=o.children,m=o.className,n=_(o,["children","className"]);return D.createElement("div",T({className:q("card-group",m)},n,{ref:d}),c)});j.propTypes={children:v.node,className:v.string};j.displayName="CCardGroup";var ae=["32 32","<path d='M15.448 7.021c2.443 0 4.745 1.083 6.432 2.776v0.005c0-0.813 0.547-1.428 1.303-1.428h0.192c1.193 0 1.432 1.125 1.432 1.48l0.005 12.635c-0.083 0.828 0.855 1.256 1.376 0.724 2.025-2.083 4.452-10.719-1.261-15.719-5.328-4.667-12.479-3.896-16.281-1.276-4.041 2.792-6.624 8.959-4.115 14.755 2.74 6.319 10.573 8.204 15.235 6.324 2.36-0.953 3.448 2.233 0.995 3.276-3.697 1.577-14 1.416-18.812-6.917-3.251-5.629-3.079-15.531 5.547-20.661 6.593-3.927 15.292-2.839 20.536 2.636 5.48 5.729 5.163 16.448-0.187 20.615-2.423 1.895-6.021 0.052-5.995-2.709l-0.027-0.9c-1.687 1.671-3.932 2.651-6.375 2.651-4.833 0-9.088-4.256-9.088-9.084 0-4.88 4.255-9.181 9.088-9.181zM21.527 15.855c-0.183-3.537-2.808-5.667-5.98-5.667h-0.12c-3.656 0-5.687 2.88-5.687 6.145 0 3.661 2.453 5.973 5.672 5.973 3.593 0 5.952-2.629 6.124-5.739z'/>"];const re=/^(?!.*[._-]{2})(?!.*@\w*\d)(?!.*[@._-][^\w.-])[a-zA-Z0-9]+([._-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}$/,oe=Q({email:b().email("Invalid email address").matches(re,"Invalid email address").required("Required"),password:b().required("Required").min(8,"At least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^a-zA-Z0-9]).{8,}$/,"Password should be combination of one uppercase , one lower case, one special character, one digit and min 8 , max 20 char long")}),fe=({setIsLogged:o,isLogged:d})=>{const[c,m]=r.useState(!1),[n,g]=r.useState(""),h=G(),P=$(),[u,F]=r.useState(!1),C=B(s=>s.loginSlice),{values:f,handleChange:w,handleSubmit:L,touched:y,errors:i}=X({initialValues:{email:"",password:""},validationSchema:oe,onSubmit:async s=>{W.post("/login",s).then(a=>{console.log("Authentication successful",a.data);const{password:te,confirmation:ce,_id:ne,...Z}=a.data.user;J(Z),g(""),o(!0),h("/Dash")}).catch(a=>{a.response&&g(a.response.data.error),console.log("Authentication failed",a)})}}),N=Y((s,a)=>{P(U({key:s,value:a}))},250);return r.useEffect(()=>{const s=setTimeout(console.log(C),5e3);return()=>{clearTimeout(s)}},[C]),r.useEffect(()=>{d===!0&&h("/Dash")},[]),e.jsxs("div",{className:"min-vh-100 d-flex flex-row align-items-center",style:{backgroundColor:"#044c54"},children:[c&&e.jsx(ForgetPass,{setVisible:m,visible:c}),e.jsx(O,{children:e.jsx(A,{className:"justify-content-center",children:e.jsx(x,{md:8,children:e.jsxs(j,{children:[e.jsx(z,{className:"p-4",children:e.jsx(E,{children:e.jsxs(ee,{onSubmit:L,children:[e.jsx("h1",{children:"Login"}),n.length>0?e.jsx(M,{color:"danger",children:n}):null,e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(R,{className:"mb-3",children:[e.jsx(t,{children:e.jsx(l,{icon:ae})}),e.jsx(I,{name:"email",value:f.email,onChange:s=>{w(s),N("email",s.target.value)},placeholder:"Email",autoComplete:"email"}),i.email&&y.email&&e.jsx(S,{content:i.email,placement:"top",children:e.jsx(t,{children:e.jsx(l,{style:{color:"red"},icon:k})})})]}),e.jsxs(R,{className:"mb-4",children:[e.jsx(t,{children:e.jsx(l,{icon:se})}),e.jsx(I,{name:"password",value:f.password,onChange:s=>{w(s),N("password",s.target.value)},type:u?"text":"password",placeholder:"Password",autoComplete:"current-password"}),e.jsx(t,{onClick:()=>F(!u),children:u?e.jsx(H,{}):e.jsx(K,{})}),i.password&&y.password&&e.jsx(S,{content:i.password,placement:"top",children:e.jsx(t,{children:e.jsx(l,{style:{color:"red"},icon:k})})})]}),e.jsxs(A,{children:[e.jsx(x,{xs:6,children:e.jsx(p,{type:"submit",style:{backgroundColor:"#044c54",color:"white"},className:"px-4",children:"Login"})}),e.jsx(x,{xs:6,className:"text-right",children:e.jsx(p,{onClick:()=>h("/password-reset"),color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),e.jsx(z,{style:{backgroundColor:"#cc2c44",width:"44%"},className:"text-white py-5",children:e.jsx(E,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Join us today to unlock exciting features and personalized experiences! Register now to start exploring."}),e.jsx(V,{to:"/register",children:e.jsx(p,{style:{backgroundColor:"#044c54",color:"white"},className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})]})};export{fe as default};
