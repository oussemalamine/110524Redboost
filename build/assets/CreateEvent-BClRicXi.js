import{j as e,P as F,r as v,n as T}from"./index-BWSGRk5u.js";import{C as L,a as R,b as _,c as I,d as A}from"./DefaultLayout-FMg7WMAt.js";import{a as u,b as M}from"./index.es-DRZNMFCF.js";import{C as r,a as H}from"./CFormInput-C596D-75.js";import{C as P,a as B}from"./CCardBody-D8fG5Ixc.js";import{C as U}from"./CCardHeader-BRt0FPuW.js";import{C as z}from"./CForm-C8b6Sqr0.js";import{C as k}from"./CFormTextarea-B2VJrRPX.js";import{C as S}from"./CFormSelect-DPAmhN87.js";import{C as y,a as f}from"./CRow-BFP9KtH9.js";import"./isObject-C2i0osli.js";import"./cil-user-Ddrdy7PS.js";function W({setVisible:m,visible:o,message:x}){return e.jsx(e.Fragment,{children:e.jsxs(L,{alignment:"center",visible:o,onClose:()=>m(!1),"aria-labelledby":"VerticallyCenteredExample",children:[e.jsx(R,{children:e.jsx(_,{id:"VerticallyCenteredExample",children:"Event Creation"})}),e.jsx(I,{children:x}),e.jsx(A,{children:e.jsx(u,{color:"secondary",onClick:()=>m(!1),children:"Close"})})]})})}const q=""+new URL("file-blank-solid-240-DUMZ0WQ9.png",import.meta.url).href,O=""+new URL("file-css-solid-240-BHklwn9W.png",import.meta.url).href,V=""+new URL("file-pdf-solid-240-ANi_uwT2.png",import.meta.url).href,G=""+new URL("file-png-solid-240-Cd058vx6.png",import.meta.url).href,w={default:q,pdf:V,png:G,css:O},Q=""+new URL("cloud-upload-regular-240-B28by-O_.png",import.meta.url).href,D=m=>{const o=v.useRef(null),[x,j]=v.useState([]),t=()=>o.current.classList.add("bg-info"),p=()=>o.current.classList.remove("bg-info"),i=d=>{const h=d.target.files[0];if(h){const g=[...x,h];j(g),m.onFileChange(g)}},c=d=>{const h=x.filter(g=>g!==d);j(h),m.onFileChange(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{height:"auto"},ref:o,className:"drop-file-input border rounded p-3 mb-3",onDragEnter:t,onDragLeave:p,onDrop:p,children:[e.jsxs("div",{className:"drop-file-input__label text-center text-secondary font-weight-bold",children:[e.jsx("img",{src:Q,alt:"",className:"img-fluid mb-2"}),e.jsx("p",{children:"Drag & Drop your files here"})]}),e.jsx(r,{type:"file",id:"file-input",className:"form-control-file",onChange:i})]}),x.length>0&&e.jsxs("div",{className:"drop-file-preview",children:[e.jsx("p",{className:"drop-file-preview__title font-weight-bold mb-3",children:"Ready to upload"}),x.map((d,h)=>e.jsxs("div",{className:"drop-file-preview__item",style:{height:"auto",display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #dcdcdc",borderRadius:"5px"},children:[e.jsxs("div",{className:"drop-file-preview__item__info",style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[e.jsx("img",{src:w[d.type.split("/")[1]]||w.default,alt:"",className:"img-thumbnail mr-3",style:{width:"40px",height:"40px"}}),e.jsx("p",{children:d.name}),e.jsxs("p",{children:[d.size,"B"]})]}),e.jsx(u,{color:"danger",style:{height:"auto"},onClick:()=>c(d),children:"x"})]},h))]})]})};D.propTypes={onFileChange:F.func};const re=({})=>{const[m,o]=v.useState(!1),[x,j]=v.useState(""),[t,p]=v.useState({eventName:"",startDate:"",endDate:"",location:"",description:"",status:"",capacity:"",eventType:"",eventLink:"",files:[],organizer:"",phoneNumber:"",email:"",expertName:"",sections:[{title:"",startingHour:"",duration:"",speakers:""}],tasks:[{taskName:"",deadline:"",status:"",workers:[]}]}),i=s=>{const{name:n,value:l}=s.target;p({...t,[n]:l})},c=(s,n)=>{const{name:l,value:C}=n.target,b=[...t.sections];b[s]={...b[s],[l]:C},p({...t,sections:b})},d=()=>{p({...t,sections:[...t.sections,{title:"",startingHour:"",duration:"",speakers:""}]})},h=()=>{p({...t,tasks:[...t.tasks,{taskName:"",deadline:"",status:"",workers:[]}]})},g=()=>{const s=[...t.tasks];s.splice(1,s.length-1),p({...t,tasks:[s]})},E=()=>{const s=[...t.sections];s.splice(1,s.length-1),p({...t,sections:[s]})},N=async()=>{try{const s=t.tasks.filter(C=>C.taskName.trim()!==""&&C.deadline.trim()!==""&&C.workers.trim()!==""),n={...t,tasks:s};console.log(n),(await T.post("/events",n)).status===200?(console.log("Event Created Successfully"),j("Event Created Successfully"),o(!0)):(console.log("Failed to create event"),j("Failed to create Event"),o(!0))}catch(s){console.error("Failed to create event:",s),j("Failed to create Event")}};return e.jsxs(M,{className:"my-4",children:[e.jsx(W,{setVisible:o,visible:m,message:x}),e.jsxs(P,{children:[e.jsx(U,{className:"bg-dark text-light",children:"Create New Event"}),e.jsx(B,{children:e.jsxs(z,{onSubmit:N,children:[e.jsx("h2",{style:{textAlign:"center",margin:"20px"},children:"Event Information"}),e.jsx(a,{label:"Event Name",children:e.jsx(r,{type:"text",name:"eventName",value:t.eventName,onChange:i,required:!0})}),e.jsx(a,{label:"Start Date",children:e.jsx(r,{type:"datetime-local",name:"startDate",value:t.startDate,onChange:i,required:!0})}),e.jsx(a,{label:"End Date",children:e.jsx(r,{type:"datetime-local",name:"endDate",value:t.endDate,onChange:i,required:!0})}),e.jsx(a,{label:"Location",children:e.jsx(r,{type:"text",name:"location",value:t.location,onChange:i})}),e.jsx(a,{label:"Description",children:e.jsx(k,{name:"description",value:t.description,onChange:i})}),e.jsx("h2",{style:{textAlign:"center",margin:"20px"},children:"Program"}),e.jsx(a,{label:"Status",children:e.jsxs(S,{name:"status",value:t.status,onChange:i,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx(a,{label:"Capacity",children:e.jsx(r,{type:"number",name:"capacity",value:t.capacity,onChange:i})}),e.jsx(a,{label:"Event Type",children:e.jsx(r,{type:"text",name:"eventType",value:t.eventType,onChange:i})}),e.jsx(a,{label:"Event Link",children:e.jsx(r,{type:"url",name:"eventLink",value:t.eventLink,onChange:i})}),e.jsx(a,{label:"Organizer",children:e.jsx(r,{type:"text",name:"organizer",value:t.organizer,onChange:i})}),e.jsx(a,{label:"Phone Number",children:e.jsx(r,{type:"tel",name:"phoneNumber",value:t.phoneNumber,onChange:i})}),e.jsx(a,{label:"Email",children:e.jsx(r,{type:"email",name:"email",value:t.email,onChange:i})}),e.jsx(a,{label:"Expert Name",children:e.jsx(r,{type:"text",name:"expertName",value:t.expertName,onChange:i})}),e.jsx("h2",{style:{textAlign:"center",margin:"20px"},children:"Sections"}),t.sections.map((s,n)=>e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"20px",color:"green"},children:["Section",n," :"]}),e.jsx(a,{label:"Section Title",children:e.jsx(r,{type:"text",name:"title",value:s.title,onChange:l=>c(n,l)})}),e.jsx(a,{label:"Starting Hour",children:e.jsx(r,{type:"time",name:"startingHour",value:s.startingHour,onChange:l=>c(n,l)})}),e.jsx(a,{label:"Duration (in minutes)",children:e.jsx(r,{type:"number",name:"duration",value:s.duration,onChange:l=>c(n,l)})}),e.jsx(a,{label:"Speakers",children:e.jsx(k,{name:"speakers",value:s.speakers,onChange:l=>c(n,l)})})]},n)),e.jsx(y,{className:"justify-content-center",children:e.jsxs(f,{xs:"auto",children:[e.jsx(u,{style:{margin:"20px"},type:"button",color:"info",onClick:d,className:"mb-3 ml-3",children:"Add Section"}),e.jsx(u,{style:{margin:"20px"},type:"button",color:"danger",onClick:E,className:"mb-3 ml-3",children:"Remove the last Section"})]})}),e.jsx("h2",{style:{textAlign:"center",margin:"20px"},children:"Tasks"}),t.tasks.map((s,n)=>e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"20px",color:"green"},children:["Task",n," :"]}),e.jsx(a,{label:"Task Name",children:e.jsx(r,{type:"text",name:"taskName",value:s.taskName,onChange:l=>c(n,l)})}),e.jsx(a,{label:"Deadline",children:e.jsx(r,{type:"datetime-local",name:"deadline",value:s.deadline,onChange:l=>c(n,l)})}),e.jsx(a,{label:"Status",children:e.jsxs(S,{name:"status",value:s.status,onChange:l=>c(n,l),children:[e.jsx("option",{value:"0",children:"Not Started"}),e.jsx("option",{value:"1",children:"In Progress"}),e.jsx("option",{value:"2",children:"Completed"})]})}),e.jsx(a,{label:"Workers",children:e.jsx(k,{name:"workers",value:s.workers,onChange:l=>c(n,l)})})]},n)),e.jsx(y,{className:"justify-content-center",children:e.jsxs(f,{xs:"auto",children:[e.jsx(u,{style:{margin:"20px"},type:"button",color:"info",onClick:h,className:"mb-3 ml-3",children:"Add Task"}),e.jsx(u,{style:{margin:"20px"},type:"button",color:"danger",onClick:g,className:"mb-3 ml-3",children:"Remove the last Task"})]})}),e.jsx("h2",{style:{textAlign:"center",margin:"20px"},children:"Media"}),e.jsx(D,{}),e.jsx(y,{className:"justify-content-center",children:e.jsx(f,{xs:"auto",children:e.jsx(u,{onClick:N,type:"submit",color:"primary",className:"mt-3",children:"Create Event"})})})]})})]})]})},a=({label:m,children:o})=>e.jsxs(y,{className:"mb-3",children:[e.jsx(f,{md:"3",children:e.jsx(H,{children:m})}),e.jsx(f,{md:"9",children:o})]});export{re as default};
